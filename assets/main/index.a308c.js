window.__require=function e(t,i,n){function c(r,s){if(!i[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){return c(t[r][1][e]||e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({chouJiangPage:[function(e,t,i){"use strict";cc._RF.push(t,"98a4c4U+5NENrqkH36J6za4","chouJiangPage");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var c,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(c=e[s])&&(r=(o<3?c(r):o>3?c(t,i,r):c(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.wheelSp=null,t.doubleReward=null,t.choujiangBtn=null,t.choujiangVideo=null,t.choujiangNormal=null,t.choujiangTimes=null,t.gearNum=6,t.defaultAngle=-12,t.spinTime=0,t.gearAngle=60,t.offOn=!1,t.transformRotate=0,t.wheelState=0,t.curSpeed=0,t.acc=.1,t.maxSpeed=12,t.duration=3,t.finalAngle=0,t.randmArr=[1,19,49,50,60,100],t.targetID=1,t.springback=!1,t.decAngle=720,t.isCanClick=!0,t}var i;return c(t,e),i=t,t.prototype.start=function(){cc.resources.load("sound/\u7529\u8471\u6b4c",cc.AudioClip,null,function(e,t){cc.audioEngine.playMusic(t,!0)})},t.randomNumBoth=function(e,t){var i=t-e,n=Math.random();return e+Math.round(n*i)},t.prototype.onEnable=function(){this.willShow()},t.prototype.willShow=function(){this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(.5,{opacity:255},{easing:"fade"}).start();var e=i.getValue("times",0);this.choujiangTimes.string="\u7d2f\u8ba1\u62bd\u5956\u6b21\u6570\uff1a"+e+"\u6b21",this.refresh(),this.wheelSp.angle=-this.defaultAngle,this.choujiangBtn.on(cc.Node.EventType.TOUCH_END,this.choujiangBtnClick.bind(this))},t.prototype.choujiangFunc=function(){if(0===this.wheelState){cc.resources.load("sound/\u8f6c\u76d8\u8f6c\u52a8\u58f0\u97f3",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)}),this.decAngle=720;var e=i.randomNumBoth(1,100);e<=this.randmArr[0]?this.targetID=1:e>this.randmArr[0]&&e<=this.randmArr[1]?this.targetID=3:e>this.randmArr[1]&&e<=this.randmArr[2]?this.targetID=5:e>this.randmArr[2]&&e<=this.randmArr[3]?this.targetID=2:e>this.randmArr[3]&&e<=this.randmArr[4]?this.targetID=4:e>this.randmArr[4]&&e<=this.randmArr[5]&&(this.targetID=6);var t=Number(i.getValue("times",0));t>0&&t%14==0&&(this.targetID=1),this.wheelState=1,this.curSpeed=0,this.spinTime=0}},t.prototype.choujiangBtnClick=function(){var e=this;this.isCanClick&&(this.isCanClick=!1,this.scheduleOnce(function(){e.isCanClick=!0},1),cc.audioEngine.pauseMusic(),this.choujiangFunc())},t.prototype.doubleRewardClick=function(){var e=this;this.isCanClick&&(this.isCanClick=!1,this.scheduleOnce(function(){e.isCanClick=!0},1),this.showRes())},t.prototype.refresh=function(){setTimeout(function(){cc.audioEngine.resumeMusic()},2e3)},t.prototype.willHide=function(){this.closeBtn.off(cc.Node.EventType.TOUCH_END,this.onCloseBtnClick,this)},t.prototype.onCloseBtnClick=function(){},t.prototype.update=function(e){if(0!==this.wheelState)if(1==this.wheelState)if(this.spinTime+=e,this.wheelSp.angle=this.wheelSp.angle-this.curSpeed,this.curSpeed<=this.maxSpeed)this.curSpeed+=this.acc;else{if(this.spinTime<this.duration)return;this.finalAngle=360-this.targetID*this.gearAngle+this.defaultAngle,this.maxSpeed=this.curSpeed,this.springback&&(this.finalAngle+=this.gearAngle),this.wheelSp.angle=this.finalAngle,this.wheelState=2}else if(2==this.wheelState){var t=this.wheelSp.angle,n=t-this.finalAngle;if(this.curSpeed=this.maxSpeed*((-this.decAngle-n)/this.decAngle)+.2,this.wheelSp.angle=t+this.curSpeed,this.decAngle-n>=1428){if(this.wheelState=0,this.wheelSp.angle=this.finalAngle-this.defaultAngle,cc.resources.load("sound/\u8f6c\u76d8\u63d0\u793a\u97f3",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)}),this.springback){var c=cc.rotateBy(.6,-this.gearAngle),o=cc.sequence(cc.delayTime(.2),c,cc.callFunc(this.showRes,this));this.wheelSp.runAction(o)}else this.showRes();var r=Number(i.getValue("times",0))+1;i.setValue("times",r),this.choujiangTimes.string="\u7d2f\u8ba1\u62bd\u5956\u6b21\u6570\uff1a"+r+"\u6b21"}}},t.prototype.showRes=function(){switch(this.targetID){case 1:cc.resources.load("sound/\u73a9\u5177\u6216\u5361\u7247",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)});break;case 2:cc.resources.load("sound/\u5199\u4f5c\u4e1a\u4e00\u5c0f\u65f6",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)});break;case 3:cc.resources.load("sound/\u606d\u559c\u83b7\u5f97\u6d17\u7897\u4e00\u6b21",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)});break;case 4:cc.resources.load("sound/\u606d\u559c\u83b7\u5f97\u53e0\u8863\u670d\u4e00\u6b21",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)});break;case 5:cc.resources.load("sound/\u606d\u559c\u83b7\u5f97\u8df3\u7ef3\u4e00\u767e\u4e2a",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)});break;case 6:cc.resources.load("sound/\u606d\u559c\u83b7\u5f97\u62cd\u7403\u4e24\u767e\u4e2a",cc.AudioClip,null,function(e,t){cc.audioEngine.playEffect(t,!1)})}this.refresh()},t.getValue=function(e,t){var i="";return"number"==typeof(i=window.localStorage.getItem(e))&&0==i||null!=i&&""!=i||(i=t),i},t.setValue=function(e,t){window.localStorage.setItem(e,t)},o([a(cc.Node)],t.prototype,"closeBtn",void 0),o([a(cc.Node)],t.prototype,"wheelSp",void 0),o([a(cc.Node)],t.prototype,"doubleReward",void 0),o([a(cc.Node)],t.prototype,"choujiangBtn",void 0),o([a(cc.Node)],t.prototype,"choujiangVideo",void 0),o([a(cc.Node)],t.prototype,"choujiangNormal",void 0),o([a(cc.Label)],t.prototype,"choujiangTimes",void 0),i=o([s],t)}(cc.Component);i.default=l,cc._RF.pop()},{}]},{},["chouJiangPage"]);